# EDR Agent 配置文件示例
# 复制此文件为 agent.yaml 并根据实际情况修改

# ============================================================
# Agent 基础配置
# ============================================================
agent:
  id: "test-agent-001"          # Agent 唯一标识（必填）
  name: "edr-agent"              # Agent 名称（可选）

# ============================================================
# 采集器配置
# ============================================================
collector:
  enabled_types:                 # 启用的采集类型
    - "process"                  # 进程事件采集
    # - "file"                   # 文件事件采集（待实现）
    # - "network"                # 网络事件采集（待实现）
  buffer_size: 4096              # 事件缓冲区大小（必填，范围：1-100000）

# ============================================================
# 日志配置
# ============================================================
log:
  level: "info"                  # 日志级别：debug, info, warn, error
  output: "file"                 # 输出方式：console, file, both
  file_path: "logs/agent.log"    # 日志文件路径
  max_size_mb: 100               # 单文件最大大小(MB)
  max_backups: 3                 # 最大保留文件数

# ============================================================
# Cloud 通信配置
# ============================================================
# 两种运行模式：
# 1. 独立模式（推荐用于 Phase 1 测试）：
#    - endpoint 留空或不配置
#    - Agent 仅采集事件并输出到本地日志
#    - 无需启动 Cloud 服务
#
# 2. 云端模式（用于完整功能测试）：
#    - 配置 endpoint 为 Cloud 服务地址
#    - Agent 连接云端并上报事件
#    - 需要先启动 Cloud 服务

cloud:
  endpoint: ""                   # Cloud 服务地址（留空=独立模式）
                                 # 示例：grpc://localhost:9000
  tls:
    enabled: false               # 是否启用 TLS
    ca_cert: ""                  # CA 证书路径（TLS 启用时必填）

# ============================================================
# 使用示例
# ============================================================
#
# 1. 独立模式（本地测试）：
#    cloud:
#      endpoint: ""              # 留空
#
# 2. 云端模式（连接本地 Cloud 服务）：
#    cloud:
#      endpoint: "grpc://localhost:9000"
#      tls:
#        enabled: false
#
# 3. 云端模式（连接远程 Cloud 服务，启用 TLS）：
#    cloud:
#      endpoint: "grpcs://cloud.example.com:9000"
#      tls:
#        enabled: true
#        ca_cert: "/etc/edr/certs/ca.crt"
